

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html class="pageview">


<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<base target="_top">
<style type="text/css">
  


/* default css */

table {
  font-size: 1em;
  line-height: inherit;
  border-collapse: collapse;
}


tr {
  
  text-align: left;
  
}


div, address, ol, ul, li, option, select {
  margin-top: 0px;
  margin-bottom: 0px;
}

p {
  margin: 0px;
}


pre {
  font-family: Courier New;
  white-space: pre-wrap;
  margin:0;
}

body {
  margin: 6px;
  padding: 0px;
  font-family: Verdana, sans-serif;
  font-size: 10pt;
  background-color: #ffffff;
  color: #000;
}


img {
  -moz-force-broken-image-icon: 1;
}

@media screen {
  html.pageview {
    background-color: #f3f3f3 !important;
    overflow-x: hidden;
    overflow-y: scroll;
  }

  

  body {
    min-height: 1100px;
    
    counter-reset: __goog_page__;
  }
  
  * html body {
    height: 1100px;
  }
  /* Prevent repaint errors when scrolling in Safari. This "Star-7" css hack
     targets Safari 3.1, but not WebKit nightlies and presumably Safari 4.
     That's OK because this bug is fixed in WebKit nightlies/Safari 4 :-). */
  html*#wys_frame::before {
    content: '\A0';
    position: fixed;
    overflow: hidden;
    width: 0;
    height: 0;
    top: 0;
    left: 0;
  }
  
  .pageview body {
    border-top: 1px solid #ccc;
    border-left: 1px solid #ccc;
    border-right: 2px solid #bbb;
    border-bottom: 2px solid #bbb;
    width: 648px !important;
    margin: 15px auto 25px;
    padding: 40px 50px;
  }
  /* IE6 */
  * html {
    overflow-y: scroll;
  }
  * html.pageview body {
    overflow-x: auto;
  }
  

  
    
    
    .writely-callout-data {
      display: inline-block;
      width: 1px;
      height: 1px;
      overflow: hidden;
      margin-left: -1px;
    }
    

    .writely-footnote-marker {
      background-image: url('MISSING');
      background-color: transparent;
      background-repeat: no-repeat;
      width: 7px;
      overflow: hidden;
      height: 16px;
      vertical-align: top;

      
      -moz-user-select: none;
    }
    .editor .writely-footnote-marker {
      cursor: move;
    }
    .writely-footnote-marker-highlight {
      background-position: -15px 0;
      -moz-user-select: text;
    }
    .writely-footnote-hide-selection ::-moz-selection, .writely-footnote-hide-selection::-moz-selection {
      background: transparent;
    }
    .writely-footnote-hide-selection ::selection, .writely-footnote-hide-selection::selection {
      background: transparent;
    }
    .writely-footnote-hide-selection {
      cursor: move;
    }

    /* Comments */
    .writely-comment-yellow {
      background-color: #ffffd7;
    }
    .writely-comment-orange {
      background-color: #ffe3c0;
    }
    .writely-comment-pink {
      background-color: #ffd7ff;
    }
    .writely-comment-green {
      background-color: #d7ffd7;
    }
    .writely-comment-blue {
      background-color: #d7ffff;
    }
    .writely-comment-purple {
      background-color: #eed7ff;
    }

  


  
  .br_fix span+br:not(:-moz-last-node) {
    
    position:relative;
    
    left: -1ex
    
  }

  
  #cb-p-tgt {
    font-size: 8pt;
    padding: .4em;
    background-color: #ddd;
    color: #333;
  }
  #cb-p-tgt-can {
    text-decoration: underline;
    color: #36c;
    font-weight: bold;
    margin-left: 2em;
  }
  #cb-p-tgt .spin {
    width: 16px;
    height: 16px;
    background: url(//ssl.gstatic.com/docs/clipboard/spin_16o.gif) no-repeat;
  }
}

h6 { font-size: 8pt }
h5 { font-size: 8pt }
h4 { font-size: 10pt }
h3 { font-size: 12pt }
h2 { font-size: 14pt }
h1 { font-size: 18pt }

blockquote {padding: 10px; border: 1px #DDD dashed }

.webkit-indent-blockquote { border: none; }

a img {border: 0}

.pb {
  border-width: 0;
  page-break-after: always;
  /* We don't want this to be resizeable, so enforce a width and height
     using !important */
  height: 1px !important;
  width: 100% !important;
}

.editor .pb {
  border-top: 1px dashed #C0C0C0;
  border-bottom: 1px dashed #C0C0C0;
}

div.google_header, div.google_footer {
  position: relative;
  margin-top: 1em;
  margin-bottom: 1em;
}


/* Table of contents */
.editor div.writely-toc {
  background-color: #f3f3f3;
  border: 1px solid #ccc;
}
.writely-toc > ol {
  padding-left: 3em;
  font-weight: bold;
}
ol.writely-toc-subheading {
  padding-left: 1em;
  font-weight: normal;
}
/* IE6 only */
* html writely-toc ol {
  list-style-position: inside;
}
.writely-toc-none {
  list-style-type: none;
}
.writely-toc-decimal {
  list-style-type: decimal;
}
.writely-toc-upper-alpha {
  list-style-type: upper-alpha;
}
.writely-toc-lower-alpha {
  list-style-type: lower-alpha;
}
.writely-toc-upper-roman {
  list-style-type: upper-roman;
}
.writely-toc-lower-roman {
  list-style-type: lower-roman;
}
.writely-toc-disc {
  list-style-type: disc;
}

/* Ordered lists converted to numbered lists can preserve ordered types, and
   vice versa. This is confusing, so disallow it */
ul[type="i"], ul[type="I"], ul[type="1"], ul[type="a"], ul[type="A"] {
  list-style-type: disc;
}

ol[type="disc"], ol[type="circle"], ol[type="square"] {
  list-style-type: decimal;
}

/* end default css */


  /* default print css */
  @media print {
    body {
      padding: 0;
      margin: 0;
    }

    div.google_header, div.google_footer {
      display: block;
      min-height: 0;
      border: none;
    }

    div.google_header {
      flow: static(header);
    }

    /* used to insert page numbers */
    div.google_header::before, div.google_footer::before {
      position: absolute;
      top: 0;
    }

    div.google_footer {
      flow: static(footer);
    }

    /* always consider this element at the start of the doc */
    div#google_footer {
      flow: static(footer, start);
    }

    span.google_pagenumber {
      content: counter(page);
    }

    span.google_pagecount {
      content: counter(pages);
    }

    .endnotes {
      page: endnote;
    }

    /* MLA specifies that endnotes title should be 1" margin from the top of the page. */
    @page endnote {
      margin-top: 1in;
    }

    callout.google_footnote {
      
      display: prince-footnote;
      footnote-style-position: inside;
      /* These styles keep the footnote from taking on the style of the text
         surrounding the footnote marker. They can be overridden in the
         document CSS. */
      color: #000;
      font-family: Times New Roman;
      font-size: 12.0pt;
      font-weight: normal;
    }

    /* Table of contents */
    #WritelyTableOfContents a::after {
      content: leader('.') target-counter(attr(href), page);
    }

    #WritelyTableOfContents a {
      text-decoration: none;
      color: black;
    }

    /* Comments */
    .writely-comment-yellow {
      background-color: #ffffd7;
    }
    .writely-comment-orange {
      background-color: #ffe3c0;
    }
    .writely-comment-pink {
      background-color: #ffd7ff;
    }
    .writely-comment-green {
      background-color: #d7ffd7;
    }
    .writely-comment-blue {
      background-color: #d7ffff;
    }
    .writely-comment-purple {
      background-color: #eed7ff;
    }
  }

  @page {
    @top {
      content: flow(header);
    }
    @bottom {
      content: flow(footer);
    }
    @footnotes {
      border-top: solid black thin;
      padding-top: 8pt;
    }
  }
  /* end default print css */


/* custom css */

code {
  font-weight: lighter;
}

/* end custom css */

/* ui edited css */

body {
  font-family: Times New Roman;
  
  font-size: 12.0pt;
  line-height: 2;
  background-color: #ffffff;
}
/* end ui edited css */


/* editor CSS */
.editor a:visited {color: #551A8B}
.editor table.zeroBorder {border: 1px dotted gray}
.editor table.zeroBorder td {border: 1px dotted gray}
.editor table.zeroBorder th {border: 1px dotted gray}


.editor div.google_header, .editor div.google_footer {
  border: 2px #DDDDDD dashed;
  position: static;
  width: 100%;
  min-height: 2em;
}

.editor .misspell {background-color: yellow}

.editor .writely-comment {
  font-size: 9pt;
  line-height: 1.4;
  padding: 1px;
  border: 1px dashed #C0C0C0
}


/* end editor CSS */

</style>

  
  <title>HPLDoc</title>

</head>

<body 
    
    >
    
    
    
<div>
  <h1>
    HPL documentation
  </h1>
  <p style=TEXT-ALIGN:left>
    HPL ( High Performance Linpack) is a program that allows one to measure the performance of a high performance computing environment. Particularly, it uses MPI to distribute difficult computational work across nodes of a cluster. On our Rocks Cluster installation, we only need to install one additional thing, ATLAS, the Automatically Tuned Linear Algebra Software. This software will be the more difficult and longer install because it automatically tunes itself at compilation time for maximum performance. ATLAS was probably chosen so that hardware dependent features can be taken advantage of during the test.
  </p>
  <h2>
    Default build<br>
  </h2>
  <p style=MARGIN-LEFT:40px>
    Atlas can supposedly be tuned even further but for now we will do it the automated way.&nbsp; Be sure to turn off frequency scailing using the command before you compile, the configure step will likely inform you if you have it on. this command will turn it off <b>/usr/bin/cpufreq-selector -g performance</b>. Then simply create a directory change to it and execute the configure script in the parent directory.&nbsp; These commands should do it.<br>
  </p>
  <p style="FONT-FAMILY:Courier New; FONT-WEIGHT:lighter; MARGIN-LEFT:40px">
    <font size=2>cd ATLAS<br>
    mkdir SLU<br>
    cd SLU<br>
    ../configure #here you may get a warning about frequency scaling.<br>
    </font>
  </p>
  <p style="FONT-FAMILY:Courier New; FONT-WEIGHT:lighter; MARGIN-LEFT:40px">
    <font size=2>make build</font><br>
  </p>
  <h3>
    &nbsp; Configure HPLinpack
  </h3>
  <div style=MARGIN-LEFT:40px>
    This is a long compile. Next we must configure HPLinpack, here on referred to as hpl. The minimum configuration will be to correct the location of mpich in the makefile. You can simply look at the files in the directory 'setup' and copy the one closest to your environment to a new file called Make.(something) where you can specify the something but you should probably make it indicative of your environment. I named mine Make.slu32 because there will be a 64 bit one in the future, so this one will be for our 32 bit cluster. My environment was a cluster of 32 bit AMD Athlon processors and I was using the C interface to BLAS so I copied the file Make.Linux_ATHLON_CBLAS. Correct the following lines<br>
    correct the arch variable to reflect the name you gave to the file.<br>
    &nbsp;ARCH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = slu32<br>
    for MPICHamn<br>
    &nbsp;MPdir&nbsp; = /opt/mpich/gnu/<br>
    &nbsp;MPinc = -I$(MPdir)/include<br>
    &nbsp;MPlib&nbsp; = $(MPdir)/lib/libmpich.a<br>
    then to tell it where ATLAS left its archive files installed correct these lines. in our case, they were left in the directory 'lib' inside the directory we created.<br>
    LAdir&nbsp; = $(HOME)/ATLAS/SLU/lib/<br>
    LAinc =<br>
    LAlib&nbsp; = $(LAdir)/libcblas.a&nbsp; $(LAdir)/libatlas.a<br>
    finally, the file you copied <i>may</i> look for the linker for the FORTRAN internals to CBLAS<br>
    LINKER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = /usr/bin/gfortran&nbsp;<br>
    Here, because I decompressed atlas in my home directory, atlas shared object archives were dropped here, those are 2 locations. The location of CBLAS, the C interface to the Basic Linear Algebra Subprograms library, and ATLAS. CBLAS was included with ATLAS. The space between these directory names is important, that makes LAlib a list consisting of 2 strings.<br>
  </div>
  <h3>
    Compile HPL
  </h3>
  <div style=MARGIN-LEFT:40px>
    Now, to compile the program you pass the arch variable to make:<br>
    make arch=slu32<br>
    and it will will create a directory "hpl-2.0/bin/slu32/"&nbsp; and here will be the program xhpl with a file HPL.dat .<br>
    If there are errors referring to broken symlinks to <b>hpl</b>/bin/&lt;arch&gt;/* where arch is the architecture you chose, those the makefile stupidly creating symlinks to paths that arent' there. you must correct them by createing a symlink hpl that points to hpl-2.0<br>
  </div>
  <h2>
    Tuning
  </h2>
  <h3 style=MARGIN-LEFT:40px>
    tuning ATLAS
  </h3>
  <p style=MARGIN-LEFT:40px>
    To tune ATLAS you must do so before compiling. You must pass variables and flags to the ../configure command mentioned before.cd<br>
  </p>
  <p style=MARGIN-LEFT:40px>
    an example for compiling for a Core 2 Duo 2.4 Gz the command would be this<br>
  </p>
  <p style=MARGIN-LEFT:40px>
    ../configure -b 64 -D c -DPentiumCPS=2400
  </p>
  <p style=MARGIN-LEFT:40px>
    this seems to be "-b &lt;pointer width&gt;"&nbsp; pointer width=64 for 64 bit architectures
  </p>
  <p style=MARGIN-LEFT:40px>
    &nbsp;"-D c -DPentiumCPS&lt; clock speed in megahertz of the compiling computer&gt;"&nbsp; is for assuring correct timing for the compiling node.
  </p>
  <p style=MARGIN-LEFT:40px>
    &nbsp;make build&nbsp; &nbsp;&nbsp; # tune &amp; build lib
  </p>
  <h3 style=MARGIN-LEFT:40px>
    tuning HPL&nbsp;<br>
  </h3>
  <p style=MARGIN-LEFT:40px>
    the make file you copied for hpl may be close to your environment but there are many more options in the file for tuning. For example, if you prefer to use openmpi instead of mpich you must put different paths in the makefile. If you would also like to test the fortran performance of your mpi environment, you must enable a bunch of fortran paramaters documented in the makefiles's comments. After building hpl, there should be a folder named 'bin' in the hpl directory. In this directory there will be 2 files: xhpl, the program, and HPL.dat, a configuration file.<br>
  </p>
  <h2>
    Running HPL
  </h2>
  &nbsp;&nbsp;&nbsp;&nbsp; The configuration file, HPL.dat, has 31 lines. There is an <a href=http://www.netlib.org/benchmark/hpl/tuning.html#tips id=ppfn title="HPL Tuning">HPL Tuning</a> guide that comes with the program. The program, xhpl, must be executed by the mpirun provided by the mpi environment it was compiled with. If you chose openmpi instead of mpich in the makefile you must use the mpirun provided by openmpi instead of mpich. You can also provide a machine file if you only want to benchmark a subset or superset of the machines recognized by your MPI installation or include machines not known to your installation.<br>
  <br>
  more here <font size=2>
  <p>
    <a name="High Performance Linpack">http://www.liniac.upenn.edu/software/xcat1.2/bench-HOWTO.html#High%20Performance%20Linpack</a>
  </p>
  </font><br>
  <br>
</div>
<div>
  <br>
</div>
<br></body>
</html>